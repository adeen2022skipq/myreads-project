(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(10),r=n.n(a),o=n(5),i=(n(16),n(9)),l=n.n(i),h=n(11),j=n(4),b=(n(18),n(2)),u=n(1),d=function(e){var t=e.book,n=e.changeShelf;return Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{value:t.shelf?t.shelf:"none",onChange:function(e){return n(t,e.target.value)},children:[Object(u.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:t.title}),Object(u.jsx)("div",{className:"book-authors",children:t.authors})]})},f=function(e){var t=e.books,n=e.title,c=e.changeShelf;return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:n}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(d,{book:e,changeShelf:c})},e.id)}))})})]})},O=function(e){var t=e.allBooks,n=e.changeShelf,c=t.filter((function(e){return"currentlyReading"===e.shelf})),s=t.filter((function(e){return"wantToRead"===e.shelf})),a=t.filter((function(e){return"read"===e.shelf}));return Object(u.jsx)("div",{className:"list-books-content",children:Object(u.jsxs)("div",{children:[Object(u.jsx)(f,{books:c,title:"Currently Reading",changeShelf:n}),Object(u.jsx)(f,{books:s,title:"Want To Read",changeShelf:n}),Object(u.jsx)(f,{books:a,title:"Read",changeShelf:n})]})})},x=function(e){var t=e.query,n=e.searchQuery,c=e.searchedBooks,s=e.changeShelf;return Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)(o.b,{to:"/",children:Object(u.jsx)("a",{className:"close-search",children:"Close"})}),Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:t,onChange:function(e){return n(e.target.value)}})})]}),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:c.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(d,{book:e,changeShelf:s})},e.id)}))})})]})},p=function(){return Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)("a",{children:"Add a book"})})},v=function(){return Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:"MyReads"})})},k=n(6),m="https://reactnd-books-api.udacity.com",g=localStorage.token;g||(g=localStorage.token=Math.random().toString(36).substr(-8));var N={Accept:"application/json",Authorization:g};var S=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),r=Object(j.a)(a,2),i=r[0],d=r[1],f=Object(c.useState)([]),g=Object(j.a)(f,2),S=g[0],y=g[1],R=Object(c.useState)(new Map),w=Object(j.a)(R,2),C=w[0],T=w[1],B=Object(c.useState)(""),M=Object(j.a)(B,2),E=M[0],J=M[1],q=function(e,t){var c=n.map((function(n){return n.id===e.id?(e.shelf=t,e):n}));C.has(e.id)||(e.shelf=t,c.push(e)),function(e,t){fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(k.a)(Object(k.a)({},N),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t),s(c)},A=function(e){var t=new Map;return e.map((function(e){return t.set(e.id,e)})),t};return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/books"),{headers:N}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,s(t),T(A(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){var e=!0;return E&&function(e,t){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(k.a)(Object(k.a)({},N),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(E).then((function(t){t.error?d([]):e&&d(t)})),function(){e=!1,d([])}}),[E]),Object(c.useEffect)((function(){var e=i.map((function(e){return C.has(e.id)?C.get(e.id):e}));y(e)}),[i]),Object(u.jsx)("div",{className:"app",children:Object(u.jsxs)(b.c,{children:[Object(u.jsx)(b.a,{path:"/search",element:Object(u.jsx)(x,{query:E,searchQuery:function(e){J(e)},searchedBooks:S,changeShelf:q})}),Object(u.jsx)(b.a,{exact:!0,path:"/",element:Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)(v,{}),Object(u.jsx)(O,{allBooks:n,changeShelf:q}),Object(u.jsx)(o.b,{to:"/search",children:Object(u.jsx)(p,{})})]})})]})})};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(S,{})})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.ea18a8b5.chunk.js.map